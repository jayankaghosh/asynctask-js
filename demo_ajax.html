<!DOCTYPE html>
<html>
<head>
	<title>Ajax implementation</title>
</head>
<script type="text/javascript" src="src/AsyncTask.js"></script>
<script type="text/javascript">
	var obj;
	function onPreExecute(){
		document.getElementById('info').innerHTML += "<br><br>onPreExecute";
	}
	var ajaxObj = {
		url: 'php/data.php',
		method: 'POST',
		data: {
			name: 'John Doe'
		}
	};
	function onPostExecute(status,response){
		document.getElementById('info').innerHTML += "<br>done";
		document.getElementById('info').innerHTML += "<br>status: "+status;
		document.getElementById('info').innerHTML += "<br>response: "+response;
	}

	function sendAjax(){
		obj = new AsyncTask(onPreExecute,ajaxObj,onPostExecute);
		if(obj.exists){
			obj.execute();
		}
	}
	function giveDelay(t){
		obj = new AsyncTask(onPreExecute,ajaxObj,onPostExecute);
		obj.delay(2000);
		if(obj.exists){
			obj.execute();
		}
	}
</script>
<body>
	<button onclick="sendAjax()">Send Ajax Request</button>
	<button onclick="giveDelay(2000)">Give 2 second delay</button>
	<div id="info"></div>
</body>
</html>
