<!DOCTYPE html>
<html>
<head>
	<title>AsyncTask in Javascript</title>
</head>
<script type="text/javascript" src="src/AsyncTask.js"></script>
<script type="text/javascript">
	function onPreExecute(){
		document.getElementById('info').innerHTML += "<br><br>onPreExecute";
	}
	function doInBackground(){
		document.getElementById('info').innerHTML += "<br>working";
		for(var i=0;i<99999;i++){
			for(var j=0;j<9999;j++){
				//do something
			}
		}	
		document.getElementById('info').innerHTML += "<br>Data sent from background";
		return 'I am data sent from background';
		
	}
	function onPostExecute(status,response){
		document.getElementById('info').innerHTML += "<br>done";
		document.getElementById('info').innerHTML += "<br>status: "+status;
		document.getElementById('info').innerHTML += "<br>response: "+response;
	}

	function doTask(){
		var obj = new AsyncTask(onPreExecute,doInBackground,onPostExecute);
		if(obj.exists){
			obj.execute();
		}
	}
</script>
<body>
	<button onclick="doTask()">Do Background Task</button>
	<div id="info"></div>
</body>
</html>
