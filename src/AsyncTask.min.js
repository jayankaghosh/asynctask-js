"use strict";function AsyncTask(t,e,n){null==Promise&&(this.exists=!1),"object"==typeof e?this.isAjax=!0:"string"==typeof e?(this.isAjax=!0,e={url:e,method:"GET",data:{}}):this.isAjax=!1,this.onPreExecute=t,this.doInBackground=e,this.onPostExecute=n,this.exists=!0}AsyncTask.prototype.isAjax=null,AsyncTask.prototype.wait=0,AsyncTask.prototype.delay=function(t){this.wait=parseInt(t/2)},AsyncTask.prototype.execute=function(){var t=this;if(null==this.onPreExecute)throw new Error("AsyncTask() was not initialized properly");this.onPreExecute();var t=this;setTimeout(function(){var e=new Promise(function(e,n){if(t.isAjax){var s=t.doInBackground;e(t.ajax(s.url,s.method,s.data))}else e(t.doInBackground())});e.then(function(e){t.errorHandle(!0,e)})["catch"](function(e){t.errorHandle(!1,e)})},this.wait)},AsyncTask.prototype.errorHandle=function(t,e){var n=this;void 0!=e&&setTimeout(function(){n.onPostExecute(t,e)},this.wait)},AsyncTask.prototype.ajax=function(t,e,n){var s=this,o=new FormData;for(var a in n)o.append(a,n[a]);null==e&&(e="GET");var i;i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),i.open(e,t,!0),i.onreadystatechange=function(){4==i.readyState&&200==i.status?s.errorHandle(!0,i.responseText):4==i.readyState&&s.errorHandle(!1,i.status)},i.send(o)};